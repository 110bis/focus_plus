{"ast":null,"code":"import _regeneratorRuntime from\"/home/qtreheux/Desktop/Focus_plus/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/qtreheux/Desktop/Focus_plus/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/qtreheux/Desktop/Focus_plus/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import React,{useState}from'react';import{Form,Row,Col,Button}from'react-bootstrap';import axios from'axios';import{API_URL}from'../utils/constants';var CreatePost=function CreatePost(props){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),username=_useState2[0],setUsername=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),message=_useState4[0],setMessage=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),password=_useState6[0],setPassword=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),errorMsg=_useState8[0],setErrorMsg=_useState8[1];var handleUsernameChange=function handleUsernameChange(event){setUsername(event.target.value);};var handleMessageChange=function handleMessageChange(event){setMessage(event.target.value);};var handlePasswordChange=function handlePasswordChange(event){setPassword(event.target.value);};var handleOnSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:event.preventDefault();_context.prev=1;if(!(username.trim()!==''&&message.trim()!=='')){_context.next=9;break;}setErrorMsg('');_context.next=6;return axios.post(\"\".concat(API_URL,\"/postMsg\"),{username:username,message:message,password:password});case 6:props.history.push('/forum');_context.next=10;break;case 9:setErrorMsg(\"S'il vous plaît entrez un nom d'utilisateur et un mot de passe.\");case 10:_context.next=15;break;case 12:_context.prev=12;_context.t0=_context[\"catch\"](1);_context.t0.response&&setErrorMsg(_context.t0.response.data);case 15:case\"end\":return _context.stop();}}},_callee,null,[[1,12]]);}));return function handleOnSubmit(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(Button,{href:\"/forum\",children:\"Revenir au forum\"})})}),/*#__PURE__*/_jsxs(Form,{className:\"search-form\",onSubmit:handleOnSubmit,children:[errorMsg&&/*#__PURE__*/_jsx(\"p\",{className:\"errorMsg\",children:errorMsg}),/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(Form.Group,{controlId:\"username\",children:/*#__PURE__*/_jsx(Form.Control,{type:\"text\",name:\"username\",value:username||'',placeholder:\"Entrez votre nom d'utilisateur\",onChange:handleUsernameChange})})})}),/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(Form.Group,{controlId:\"password\",children:/*#__PURE__*/_jsx(Form.Control,{type:\"text\",name:\"message\",value:message||'',placeholder:\"Entrez votre message\",onChange:handleMessageChange})})})}),/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(Form.Group,{controlId:\"password\",children:/*#__PURE__*/_jsx(Form.Control,{type:\"text\",name:\"password\",value:password||'',placeholder:\"Entrez votre mot de passe pour valider votre post\",onChange:handlePasswordChange})})})}),/*#__PURE__*/_jsx(Button,{variant:\"primary\",type:\"submit\",children:\"Poster mon message\"})]})]});};export default CreatePost;","map":{"version":3,"sources":["/home/qtreheux/Desktop/Focus_plus/src/components/CreatePost.js"],"names":["React","useState","Form","Row","Col","Button","axios","API_URL","CreatePost","props","username","setUsername","message","setMessage","password","setPassword","errorMsg","setErrorMsg","handleUsernameChange","event","target","value","handleMessageChange","handlePasswordChange","handleOnSubmit","preventDefault","trim","post","history","push","response","data"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport { Form, Row, Col, Button } from 'react-bootstrap';\nimport axios from 'axios';\nimport { API_URL } from '../utils/constants';\n\nconst CreatePost = (props) => {\n    \n    const [username, setUsername] = useState('');\n    const [message, setMessage] = useState('');\n    const [password, setPassword] = useState('');\n    const [errorMsg, setErrorMsg] = useState('');\n    \n    const handleUsernameChange = (event) => {\n      setUsername(event.target.value);\n    }\n  \n    const handleMessageChange = (event) => {\n      setMessage(event.target.value);\n    }\n  \n    const handlePasswordChange = (event) => {\n        setPassword(event.target.value);\n    }\n\n    const handleOnSubmit = async (event) => {\n      event.preventDefault();\n  \n      try {\n          if (username.trim() !== '' && message.trim() !== '') {\n            setErrorMsg('');\n            await axios.post(`${API_URL}/postMsg`, {\n              username: username,\n              message: message,\n              password: password\n            });\n            props.history.push('/forum');\n          } else {\n            setErrorMsg(\"S'il vous plaît entrez un nom d'utilisateur et un mot de passe.\");\n          }\n        } catch (error) {\n          error.response && setErrorMsg(error.response.data);\n        }\n      };\n  \n    return (\n      <React.Fragment>\n         <Row>\n             <Col> \n             <Button href=\"/forum\">Revenir au forum</Button>\n             </Col>\n         </Row> \n        <Form className=\"search-form\" onSubmit={handleOnSubmit}>\n          {errorMsg && <p className=\"errorMsg\">{errorMsg}</p>}\n          <Row>\n            <Col>\n              <Form.Group controlId=\"username\">\n                <Form.Control\n                  type=\"text\"\n                  name=\"username\"\n                  value={username || ''}\n                  placeholder=\"Entrez votre nom d'utilisateur\"\n                  onChange={handleUsernameChange}\n                />\n              </Form.Group>\n            </Col>\n          </Row>\n          <Row>\n            <Col>\n              <Form.Group controlId=\"password\">\n                <Form.Control\n                  type=\"text\"\n                  name=\"message\"\n                  value={message || ''}\n                  placeholder=\"Entrez votre message\"\n                  onChange={handleMessageChange}\n                />\n              </Form.Group>\n            </Col>\n          </Row>\n          <Row>\n            <Col>\n              <Form.Group controlId=\"password\">\n                <Form.Control\n                  type=\"text\"\n                  name=\"password\"\n                  value={password || ''}\n                  placeholder=\"Entrez votre mot de passe pour valider votre post\"\n                  onChange={handlePasswordChange}\n                />\n              </Form.Group>\n            </Col>\n          </Row>\n          <Button variant=\"primary\" type=\"submit\">\n            Poster mon message\n          </Button>\n        </Form>\n      </React.Fragment>\n    );\n  };\n  \n  export default CreatePost;"]},"metadata":{},"sourceType":"module"}