{"ast":null,"code":"import _objectSpread from\"/home/qtreheux/Desktop/Focus_plus/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"/home/qtreheux/Desktop/Focus_plus/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/qtreheux/Desktop/Focus_plus/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/qtreheux/Desktop/Focus_plus/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import React,{useState,useRef}from'react';import{Form,Row,Col,Button}from'react-bootstrap';import Dropzone from'react-dropzone';import axios from'axios';import{API_URL}from'../utils/constants';var App=function App(props){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),file=_useState2[0],setFile=_useState2[1];// state for storing actual image\nvar _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),previewSrc=_useState4[0],setPreviewSrc=_useState4[1];// state for storing previewImage\nvar _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),errorMsg=_useState6[0],setErrorMsg=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),isPreviewAvailable=_useState8[0],setIsPreviewAvailable=_useState8[1];// state to show preview only for images\nvar dropRef=useRef();// React ref for managing the hover state of droppable area\nvar onDrop=function onDrop(files){var _files=_slicedToArray(files,1),uploadedFile=_files[0];setFile(uploadedFile);var fileReader=new FileReader();fileReader.onload=function(){setPreviewSrc(fileReader.result);};fileReader.readAsDataURL(uploadedFile);setIsPreviewAvailable(uploadedFile.name.match(/\\.(jpeg|jpg|png)$/));dropRef.current.style.border='2px dashed #e9ebeb';};var updateBorder=function updateBorder(dragState){if(dragState==='over'){dropRef.current.style.border='2px solid #000';}else if(dragState==='leave'){dropRef.current.style.border='2px dashed #e9ebeb';}};var handleOnSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){var formData;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:event.preventDefault();_context.prev=1;if(!file){_context.next=11;break;}formData=new FormData();formData.append('file',file);setErrorMsg('');_context.next=8;return axios.post(\"\".concat(API_URL,\"/upload\"),formData,{headers:{'Content-Type':'multipart/form-data'}});case 8:props.history.push('/list');_context.next=12;break;case 11:setErrorMsg(\"S'il vous plaît, ajoutez votre image\");case 12:_context.next=17;break;case 14:_context.prev=14;_context.t0=_context[\"catch\"](1);_context.t0.response&&setErrorMsg(_context.t0.response.data);case 17:case\"end\":return _context.stop();}}},_callee,null,[[1,14]]);}));return function handleOnSubmit(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsx(React.Fragment,{children:/*#__PURE__*/_jsxs(Form,{className:\"search-form\",onSubmit:handleOnSubmit,children:[errorMsg&&/*#__PURE__*/_jsx(\"p\",{className:\"errorMsg\",children:errorMsg}),/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{children:\"Placez votre image ci-dessous !\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"upload-section\",children:[/*#__PURE__*/_jsx(Dropzone,{onDrop:onDrop,onDragEnter:function onDragEnter(){return updateBorder('over');},onDragLeave:function onDragLeave(){return updateBorder('leave');},children:function children(_ref2){var getRootProps=_ref2.getRootProps,getInputProps=_ref2.getInputProps;return/*#__PURE__*/_jsxs(\"div\",_objectSpread(_objectSpread({},getRootProps({className:'drop-zone'})),{},{ref:dropRef,children:[/*#__PURE__*/_jsx(\"input\",_objectSpread({},getInputProps())),/*#__PURE__*/_jsx(\"p\",{children:\"Glissez votre image ici ou cliquez ici pour la s\\xE9lectionner\"}),file&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Image s\\xE9lectionn\\xE9e:\"}),\" \",file.name]})]}));}}),previewSrc?isPreviewAvailable?/*#__PURE__*/_jsx(\"div\",{className:\"image-preview\",children:/*#__PURE__*/_jsx(\"img\",{className:\"preview-image\",src:previewSrc,alt:\"Preview\"})}):/*#__PURE__*/_jsx(\"div\",{className:\"preview-message\",children:/*#__PURE__*/_jsx(\"p\",{children:\"L'aper\\xE7u de votre image est indisponible\"})}):/*#__PURE__*/_jsx(\"div\",{className:\"preview-message\",children:/*#__PURE__*/_jsx(\"p\",{children:\"L'aper\\xE7u de votre image s'affichera ici apr\\xE8s votre s\\xE9lection\"})})]}),/*#__PURE__*/_jsx(Button,{variant:\"primary\",type:\"submit\",children:\"Envoyer\"})]})});};export default App;","map":{"version":3,"sources":["/home/qtreheux/Desktop/Focus_plus/src/components/App.js"],"names":["React","useState","useRef","Form","Row","Col","Button","Dropzone","axios","API_URL","App","props","file","setFile","previewSrc","setPreviewSrc","errorMsg","setErrorMsg","isPreviewAvailable","setIsPreviewAvailable","dropRef","onDrop","files","uploadedFile","fileReader","FileReader","onload","result","readAsDataURL","name","match","current","style","border","updateBorder","dragState","handleOnSubmit","event","preventDefault","formData","FormData","append","post","headers","history","push","response","data","getRootProps","getInputProps","className"],"mappings":"oiBAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,MAA1B,KAAwC,OAAxC,CACA,OAASC,IAAT,CAAeC,GAAf,CAAoBC,GAApB,CAAyBC,MAAzB,KAAuC,iBAAvC,CACA,MAAOC,CAAAA,QAAP,KAAqB,gBAArB,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,OAAT,KAAwB,oBAAxB,CAEA,GAAMC,CAAAA,GAAG,CAAG,QAANA,CAAAA,GAAM,CAACC,KAAD,CAAW,eACGV,QAAQ,CAAC,IAAD,CADX,wCACdW,IADc,eACRC,OADQ,eACmB;AADnB,eAEeZ,QAAQ,CAAC,EAAD,CAFvB,yCAEda,UAFc,eAEFC,aAFE,eAE6B;AAF7B,eAGWd,QAAQ,CAAC,EAAD,CAHnB,yCAGde,QAHc,eAGJC,WAHI,8BAI+BhB,QAAQ,CAAC,KAAD,CAJvC,yCAIdiB,kBAJc,eAIMC,qBAJN,eAIgD;AACrE,GAAMC,CAAAA,OAAO,CAAGlB,MAAM,EAAtB,CAA0B;AAE1B,GAAMmB,CAAAA,MAAM,CAAG,QAATA,CAAAA,MAAS,CAACC,KAAD,CAAW,2BACDA,KADC,IACjBC,YADiB,WAExBV,OAAO,CAACU,YAAD,CAAP,CACA,GAAMC,CAAAA,UAAU,CAAG,GAAIC,CAAAA,UAAJ,EAAnB,CACAD,UAAU,CAACE,MAAX,CAAoB,UAAM,CACxBX,aAAa,CAACS,UAAU,CAACG,MAAZ,CAAb,CACD,CAFD,CAGAH,UAAU,CAACI,aAAX,CAAyBL,YAAzB,EACAJ,qBAAqB,CAACI,YAAY,CAACM,IAAb,CAAkBC,KAAlB,CAAwB,mBAAxB,CAAD,CAArB,CACAV,OAAO,CAACW,OAAR,CAAgBC,KAAhB,CAAsBC,MAAtB,CAA+B,oBAA/B,CACD,CAVD,CAYA,GAAMC,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAACC,SAAD,CAAe,CAClC,GAAIA,SAAS,GAAK,MAAlB,CAA0B,CACxBf,OAAO,CAACW,OAAR,CAAgBC,KAAhB,CAAsBC,MAAtB,CAA+B,gBAA/B,CACD,CAFD,IAEO,IAAIE,SAAS,GAAK,OAAlB,CAA2B,CAChCf,OAAO,CAACW,OAAR,CAAgBC,KAAhB,CAAsBC,MAAtB,CAA+B,oBAA/B,CACD,CACF,CAND,CAQA,GAAMG,CAAAA,cAAc,0FAAG,iBAAOC,KAAP,+HACrBA,KAAK,CAACC,cAAN,GADqB,oBAIf1B,IAJe,0BAKb2B,QALa,CAKF,GAAIC,CAAAA,QAAJ,EALE,CAMnBD,QAAQ,CAACE,MAAT,CAAgB,MAAhB,CAAwB7B,IAAxB,EAEAK,WAAW,CAAC,EAAD,CAAX,CARmB,sBASbT,CAAAA,KAAK,CAACkC,IAAN,WAAcjC,OAAd,YAAgC8B,QAAhC,CAA0C,CAC9CI,OAAO,CAAE,CACP,eAAgB,qBADT,CADqC,CAA1C,CATa,QAcnBhC,KAAK,CAACiC,OAAN,CAAcC,IAAd,CAAmB,OAAnB,EAdmB,+BAgBnB5B,WAAW,CAAC,sCAAD,CAAX,CAhBmB,yFAmBnB,YAAM6B,QAAN,EAAkB7B,WAAW,CAAC,YAAM6B,QAAN,CAAeC,IAAhB,CAA7B,CAnBmB,qEAAH,kBAAdX,CAAAA,cAAc,4CAApB,CAuBA,mBACE,KAAC,KAAD,CAAO,QAAP,wBACE,MAAC,IAAD,EAAM,SAAS,CAAC,aAAhB,CAA8B,QAAQ,CAAEA,cAAxC,WACGpB,QAAQ,eAAI,UAAG,SAAS,CAAC,UAAb,UAAyBA,QAAzB,EADf,cAEE,KAAC,GAAD,wBACE,KAAC,GAAD,8CADF,EAFF,cAOE,aAAK,SAAS,CAAC,gBAAf,wBACE,KAAC,QAAD,EACA,MAAM,CAAEK,MADR,CAEA,WAAW,CAAE,6BAAMa,CAAAA,YAAY,CAAC,MAAD,CAAlB,EAFb,CAGA,WAAW,CAAE,6BAAMA,CAAAA,YAAY,CAAC,OAAD,CAAlB,EAHb,UAKG,4BAAGc,CAAAA,YAAH,OAAGA,YAAH,CAAiBC,aAAjB,OAAiBA,aAAjB,oBACD,2CAASD,YAAY,CAAC,CAAEE,SAAS,CAAE,WAAb,CAAD,CAArB,MAAmD,GAAG,CAAE9B,OAAxD,wBACE,8BAAW6B,aAAa,EAAxB,EADF,cAEE,qFAFF,CAGGrC,IAAI,eACL,oCACE,qDADF,KACwCA,IAAI,CAACiB,IAD7C,GAJF,IADC,EALH,EADF,CAkBGf,UAAU,CACXI,kBAAkB,cAClB,YAAK,SAAS,CAAC,eAAf,uBACE,YAAK,SAAS,CAAC,eAAf,CAA+B,GAAG,CAAEJ,UAApC,CAAgD,GAAG,CAAC,SAApD,EADF,EADkB,cAKtB,YAAK,SAAS,CAAC,iBAAf,uBACE,kEADF,EANe,cAWnB,YAAK,SAAS,CAAC,iBAAf,uBACE,6FADF,EA7BM,GAPF,cAyCE,KAAC,MAAD,EAAQ,OAAO,CAAC,SAAhB,CAA0B,IAAI,CAAC,QAA/B,qBAzCF,GADF,EADF,CAiDD,CAnGD,CAqGA,cAAeJ,CAAAA,GAAf","sourcesContent":["import React, { useState, useRef } from 'react';\nimport { Form, Row, Col, Button } from 'react-bootstrap';\nimport Dropzone from 'react-dropzone';\nimport axios from 'axios';\nimport { API_URL } from '../utils/constants';\n\nconst App = (props) => {\n  const [file, setFile] = useState(null); // state for storing actual image\n  const [previewSrc, setPreviewSrc] = useState(''); // state for storing previewImage\n  const [errorMsg, setErrorMsg] = useState('');\n  const [isPreviewAvailable, setIsPreviewAvailable] = useState(false); // state to show preview only for images\n  const dropRef = useRef(); // React ref for managing the hover state of droppable area\n\n  const onDrop = (files) => {\n    const [uploadedFile] = files;\n    setFile(uploadedFile);\n    const fileReader = new FileReader();\n    fileReader.onload = () => {\n      setPreviewSrc(fileReader.result);\n    };\n    fileReader.readAsDataURL(uploadedFile);\n    setIsPreviewAvailable(uploadedFile.name.match(/\\.(jpeg|jpg|png)$/));\n    dropRef.current.style.border = '2px dashed #e9ebeb';\n  };\n\n  const updateBorder = (dragState) => {\n    if (dragState === 'over') {\n      dropRef.current.style.border = '2px solid #000';\n    } else if (dragState === 'leave') {\n      dropRef.current.style.border = '2px dashed #e9ebeb';\n    }\n  };\n\n  const handleOnSubmit = async (event) => {\n    event.preventDefault();\n\n    try {\n      if (file) {\n      const formData = new FormData();\n      formData.append('file', file);\n\n      setErrorMsg('');\n      await axios.post(`${API_URL}/upload`, formData, {\n        headers: {\n          'Content-Type': 'multipart/form-data' \n        }\n      });\n      props.history.push('/list');\n    } else {\n      setErrorMsg(\"S'il vous plaît, ajoutez votre image\");\n    }\n    } catch (error) {\n      error.response && setErrorMsg(error.response.data);\n    }\n  };\n\n  return (\n    <React.Fragment>\n      <Form className=\"search-form\" onSubmit={handleOnSubmit}>\n        {errorMsg && <p className=\"errorMsg\">{errorMsg}</p>}\n        <Row>\n          <Col>\n            Placez votre image ci-dessous !\n          </Col>\n        </Row>\n        <div className=\"upload-section\">\n          <Dropzone \n          onDrop={onDrop}\n          onDragEnter={() => updateBorder('over')}\n          onDragLeave={() => updateBorder('leave')}\n          >\n            {({ getRootProps, getInputProps }) => (\n            <div {...getRootProps({ className: 'drop-zone' })} ref={dropRef}>\n              <input {...getInputProps()} />\n              <p>Glissez votre image ici ou cliquez ici pour la sélectionner</p>\n              {file && (\n              <div>\n                <strong>Image sélectionnée:</strong> {file.name}\n              </div>\n              )}\n            </div>\n            )}\n          </Dropzone>\n          {previewSrc ? (\n          isPreviewAvailable ? (\n          <div className=\"image-preview\">\n            <img className=\"preview-image\" src={previewSrc} alt=\"Preview\" />\n          </div>\n    ) : (\n      <div className=\"preview-message\">\n        <p>L'aperçu de votre image est indisponible</p>\n      </div>\n    )\n  ) : (\n  <div className=\"preview-message\">\n    <p>L'aperçu de votre image s'affichera ici après votre sélection</p>\n  </div>\n  )}\n  </div>\n        <Button variant=\"primary\" type=\"submit\">\n          Envoyer\n        </Button>\n      </Form>\n    </React.Fragment>\n  );\n};\n\nexport default App;"]},"metadata":{},"sourceType":"module"}